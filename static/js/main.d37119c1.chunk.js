(this["webpackJsonpanime-app"]=this["webpackJsonpanime-app"]||[]).push([[0],{29:function(e,n,t){e.exports=t(41)},41:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(24),i=t.n(c),l=t(12),u=t(3),o=t(10),s=t(18),d=t(4),p=JSON.parse(localStorage.getItem("JIKAN_CACHE"))||{},f=Object(r.createContext)(),m=function(e,n){var t=n.type,r=n.payload;switch(t){case"SET_CACHE":return Object(d.a)(Object(d.a)({},e),{},Object(s.a)({},r.key,r.value));default:return e}},b=function(e){var n=e.children,t=Object(r.useReducer)(m,p),c=Object(o.a)(t,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){if(0!==Object.keys(i).length){var e=JSON.stringify(i);localStorage.setItem("JIKAN_CACHE",e)}}),[i]),a.a.createElement(f.Provider,{value:{state:i,dispatch:l}},n)},h=t(1),g=t(2);function v(){var e=Object(h.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Roboto', sans-serif;\n  }\n\n  html, body, #root {\n    width: 100%;\n    height: 100%;\n    background: #212121;\n    color: white;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);return v=function(){return e},e}var x=Object(g.a)(v());function j(){var e=Object(h.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]);return j=function(){return e},e}function E(){var e=Object(h.a)(["\n  color: white;\n  text-decoration: none;\n"]);return E=function(){return e},e}function O(){var e=Object(h.a)(["\n  background: #303030;\n  width: 100%;\n  padding: 1em;\n"]);return O=function(){return e},e}var y=g.b.header(O()),w=Object(g.b)(l.c)(E()),S=g.b.div(j()),k=function(e){var n=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y,null,a.a.createElement("h1",null,a.a.createElement(w,{to:"/home"},"Home"))),a.a.createElement(S,null,n))},C=t(8),U=t.n(C),A=t(11),L={data:null,loading:!1,error:null},I=function(e,n){var t=n.type,r=n.payload;switch(t){case"LOAD":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!0,error:null});case"SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{data:r,loading:!1,error:null});case"FAILURE":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!1,error:r});case"CLEAN":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!1,error:null});default:return e}},R=function(e,n,t,a){var c=Object(r.useContext)(f),i=Object(r.useReducer)(I,L),l=Object(o.a)(i,2),u=l[0],s=l[1];return Object(r.useEffect)((function(){if(!c.state[n]){var r=setTimeout(Object(A.a)(U.a.mark((function r(){var a,i;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=16;break}return s({type:"LOAD"}),r.prev=2,r.next=5,e.getAnimeBySearchTerm(n);case 5:a=r.sent,i=a.map((function(e){return t(e)})),s({type:"SUCCESS",payload:i}),c.dispatch({type:"SET_CACHE",payload:{key:n,value:i}}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),s({type:"FAILURE",payload:r.t0});case 14:r.next=17;break;case 16:s({type:"CLEAN"});case 17:case"end":return r.stop()}}),r,null,[[2,11]])}))),a);return function(){clearTimeout(r)}}s({type:"SUCCESS",payload:c.state[n]})}),[e,n,t,a,c]),u};function _(){var e=Object(h.a)(["\n  background-color: #262626;\n  border: none;\n  height: 30px;\n  width: 250px;\n  margin-top: 20px;\n  transition: background-color 0.2s;\n  color: white;\n  font-size: 15px;\n\n  &:focus {\n    background-color: #303030;\n  }\n"]);return _=function(){return e},e}var T=g.b.input(_()),B=function(e){var n=e.value,t=e.setSearchTerm;return a.a.createElement(T,{type:"text",value:n,onChange:function(e){return t(e.target.value)}})};function F(){var e=Object(h.a)(["\n  transition: filter 0.5s;\n  height: 100%;\n  width: 100%;\n"]);return F=function(){return e},e}function D(){var e=Object(h.a)(["\n  height: 100px;\n  color: white;\n  text-decoration: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 20px;\n"]);return D=function(){return e},e}function N(){var e=Object(h.a)(["\n  background-color: #303030;\n  height: 400px;\n  width: 250px;\n  color: white;\n  text-decoration: none;\n  text-align: center;\n  border-radius: 5px;\n  overflow: hidden;\n  box-shadow: 5px 5px 10px 5px rgba(0, 0, 0, 0.2);\n\n  &:hover img {\n    filter: brightness(0.8);\n  }\n"]);return N=function(){return e},e}function H(){var e=Object(h.a)(["\n  flex: 1 0 30%;\n  margin: 20px 5px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return H=function(){return e},e}var J=g.b.div(H()),z=Object(g.b)(l.b)(N()),K=g.b.h2(D()),q=g.b.img(F()),P=function(e){var n=e.animeId,t=e.title,r=e.image;return a.a.createElement(J,null,a.a.createElement(z,{to:"/home/anime/".concat(n)},a.a.createElement(K,null,t),a.a.createElement(q,{src:r,alt:t})))};function G(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 20px;\n"]);return G=function(){return e},e}var M=g.b.div(G()),Q=function(e){var n=e.data.map((function(e,n){return a.a.createElement(P,{key:"card-".concat(n+1),animeId:e.id,title:e.title,image:e.imageUrl})}));return a.a.createElement(M,null,n)},V=t(14),W=t(28),X=new(function(){function e(){Object(V.a)(this,e),this.BASE_URL="https://api.jikan.moe/v3"}return Object(W.a)(e,[{key:"getAnimeBySearchTerm",value:function(){var e=Object(A.a)(U.a.mark((function e(n){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.BASE_URL,"/search/anime?q=").concat(n),e.next=3,this.getData(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getAnimeById",value:function(){var e=Object(A.a)(U.a.mark((function e(n){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.BASE_URL,"/anime/").concat(n),e.next=3,this.getData(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(A.a)(U.a.mark((function e(n){var t,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Oops! Something went wrong!");case 5:return e.next=7,t.json();case 7:if(!(r=e.sent).results){e.next=12;break}return e.abrupt("return",r.results);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]),e}()),Y=function e(n){var t=n.id,r=n.title,a=n.imageUrl;Object(V.a)(this,e),this.id=t,this.title=r,this.imageUrl=a},Z=function e(n){var t=n.title,r=n.imageUrl,a=n.synopsis,c=n.episodes,i=n.score,l=n.rating,u=n.trailerUrl;Object(V.a)(this,e),this.title=t,this.imageUrl=r,this.synopsis=a,this.episodes=c,this.score=i,this.rating=l,this.trailerUrl=u};function $(e){var n=e.mal_id,t=e.title,r=e.image_url;return new Y({id:n,title:t,imageUrl:r})}function ee(e){var n=e.title,t=e.image_url,r=e.synopsis,a=e.episodes,c=e.score,i=e.rating,l=e.trailer_url;return new Z({title:n,imageUrl:t,synopsis:r,episodes:a,score:c,rating:i,trailerUrl:l})}var ne=function(){var e=Object(r.useState)(""),n=Object(o.a)(e,2),t=n[0],c=n[1],i=R(X,t,$,500),l=i.data,u=i.loading,s=i.error;return a.a.createElement(a.a.Fragment,null,a.a.createElement(B,{value:t,setSearchTerm:c}),u&&a.a.createElement("h2",null,"Loading..."),l&&a.a.createElement(Q,{data:l}),s&&a.a.createElement("h2",null,s.message))},te={data:null,loading:!1,error:!1},re=function(e,n){var t=n.type,r=n.payload;switch(t){case"LOAD":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!0,error:null});case"SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{data:r,loading:!1,error:null});case"FAILURE":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!1,error:r});case"CLEAN":return Object(d.a)(Object(d.a)({},e),{},{data:null,loading:!1,error:null});default:return e}},ae=function(e,n,t){var a=Object(r.useContext)(f),c=Object(r.useReducer)(re,te),i=Object(o.a)(c,2),l=i[0],u=i[1];return Object(r.useEffect)((function(){a.state[n]?u({type:"SUCCESS",payload:a.state[n]}):function(){var r=Object(A.a)(U.a.mark((function r(){var c,i;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:"LOAD"}),r.prev=1,r.next=4,e.getAnimeById(n);case 4:c=r.sent,i=t(c),u({type:"SUCCESS",payload:i}),a.dispatch({type:"SET_CACHE",payload:{key:n,value:i}}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),u({type:"FAILURE",payload:r.t0});case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(){return r.apply(this,arguments)}}()()}),[e,n,t,a]),l};function ce(){var e=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n"]);return ce=function(){return e},e}function ie(){var e=Object(h.a)(["\n  position: relative;\n  overflow: hidden;\n  width: 80%;\n  padding-top: 40%;\n"]);return ie=function(){return e},e}function le(){var e=Object(h.a)(["\n  background: #ff9d00;\n  padding: 10px;\n  border-radius: 10px;\n  box-shadow: -5px -5px 0px 0px #ff8400 inset,\n    5px 5px 0px 0px rgba(0, 0, 0, 0.2);\n  color: #000000;\n  margin: 20px;\n"]);return le=function(){return e},e}function ue(){var e=Object(h.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n"]);return ue=function(){return e},e}function oe(){var e=Object(h.a)(["\n  background: #303030;\n  padding: 20px;\n  border-radius: 10px;\n  width: 80%;\n  line-height: 25px;\n  letter-spacing: 1px;\n"]);return oe=function(){return e},e}function se(){var e=Object(h.a)(["\n  border-radius: 10px;\n"]);return se=function(){return e},e}function de(){var e=Object(h.a)(["\n  @media screen and (max-width: 600px) {\n    & {\n      font-size: 20px;\n    }\n  }\n"]);return de=function(){return e},e}function pe(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  & > * {\n    display: block;\n    margin-top: 30px;\n  }\n\n  & > *:last-child {\n    margin-bottom: 30px;\n  }\n"]);return pe=function(){return e},e}var fe=g.b.div(pe()),me=g.b.h1(de()),be=g.b.img(se()),he=g.b.div(oe()),ge=g.b.div(ue()),ve=g.b.div(le()),xe=g.b.div(ie()),je=g.b.iframe(ce()),Ee=function(){var e,n=Object(u.g)().animeId,t=ae(X,n,ee),r=t.data,c=t.loading,i=t.error,l=r?a.a.createElement(fe,null,a.a.createElement(me,null,r.title),a.a.createElement(be,{src:r.imageUrl,alt:r.title}),a.a.createElement(he,null,r.synopsis),a.a.createElement(ge,null,a.a.createElement(ve,null,"Episodes: ",r.episodes),a.a.createElement(ve,null,"Score: ",r.score),a.a.createElement(ve,null,"Rating: ",r.rating)),r.trailerUrl?a.a.createElement(xe,null,a.a.createElement(je,{title:"Trailer for ".concat(r.title),src:(e=r.trailerUrl,e.split("&").filter((function(e){return!e.includes("autoplay")})).join("&")),frameBorder:"0",allowFullScreen:!0})):null):null;return a.a.createElement(a.a.Fragment,null,l,c&&a.a.createElement("h1",null,"Loading"),i&&a.a.createElement("h1",null,i.message))},Oe=function(){return a.a.createElement(b,null,a.a.createElement(l.a,null,a.a.createElement(x,null),a.a.createElement(k,null,a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/home"},a.a.createElement(ne,null)),a.a.createElement(u.b,{path:"/home/anime/:animeId"},a.a.createElement(Ee,null)),a.a.createElement(u.a,{to:"/home"})))))};i.a.render(a.a.createElement(Oe,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d37119c1.chunk.js.map